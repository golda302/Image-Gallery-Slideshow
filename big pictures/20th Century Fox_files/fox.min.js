function ajax_request(){}ajax_request.prototype={$form:null,url:"",data:{},method:"GET",data_type:"json",cache:!1,async:!0,result:null,before:null,upload_progress:null,success:null,error:null,complete:null,abort:null,execute:function(){var a=this;if($fox.is_undefined(a.url))return void(DEBUG&&$fox.log("AJAX: Missing URL."));$fox.is_undefined($fox.ajax.requests[a.url])||$fox.ajax.requests[a.url].abort();var b=$fox.is_defined(a.file_upload)&&a.file_upload===!0;$fox.ajax.requests[a.url]=$.ajax({type:a.method,url:a.url,data:a.data,dataType:a.data_type,cache:a.cache,async:a.async,processData:b===!0?!1:!0,contentType:b===!0?!1:"application/x-www-form-urlencoded; charset=UTF-8",xhr:function(){var b=$.ajaxSettings.xhr();return $fox.is_function(a.upload_progress)&&(b.upload.onprogress=function(b){a.upload_progress(b)}),b},beforeSend:function(){null!==a.$form&&a.hide_validation(),$fox.is_function(a.before)&&a.before()}}).done(function(b){return $fox.is_empty(b)?!1:($fox.is_empty(b.actions)||a.run_actions(b.actions),$fox.is_empty(b.validation)||a.show_validation(b.validation),$fox.is_empty(b.successes)||$fox.ui.show_notices({successes:b.successes}),$fox.is_empty(b.errors)||$fox.ui.show_notices({errors:b.errors}),$fox.is_function(a.success)&&a.success(b),$fox.is_undefined(b.redirect)?void(a.result=b):$fox.redirect(b.redirect))}).always(function(b){$fox.is_function(a.complete)&&a.complete(b),delete $fox.ajax.requests[a.url]}).fail(function(b,c,d){"abort"===b?$fox.is_function(a.abort)&&a.abort():$fox.is_function(a.error)&&a.error()})},run_actions:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b],e=$(d.selector);if(0!==e.length)switch(d.method){case"append":e.append(d.data.content);break;case"prepend":e.prepend(d.data.content);break;case"replaceWith":e.replaceWith(d.data.content);break;case"html":e.html(d.data.content);break;case"remove":e.remove();break;case"empty":e.empty();break;case"val":e.val(d.data.content);break;case"show":e.show()}else $fox.log('run_actions: Aborted "'+d.method+'" because element "'+d.selector+"\" wasn't found.")}},show_validation:function(a){for(var b=0,c=a.length;c>b;b++){var d=$('[id="'+a[b].element+'"]');d.addClass($fox.ui.validation_error_class),$fox.is_undefined(d)||$fox.is_empty(a[b].message)||$fox.ui.show_validation_tooltip(d,this.$form,a[b].message)}},hide_validation:function(){$(".validation-error").removeClass("validation-error")}};
function ajax(){}ajax.prototype={disable_submit_button_during_submit:!0,requests:[],get:function(a,b,c,d){var e=new ajax_request;if(e.method="GET",e.url=a,e.data=b,$fox.is_undefined(c)&&(c={}),$fox.is_function(c.before)&&(e.before=c.before),$fox.is_function(c.upload_progress)&&(e.upload_progress=c.upload_progress),$fox.is_function(c.success)&&(e.success=c.success),$fox.is_function(c.error)&&(e.error=c.error),$fox.is_function(c.complete)&&(e.complete=c.complete),$fox.is_function(c.abort)&&(e.abort=c.abort),$fox.is_object(d))for(key in d)e[key]=d[key];e.execute()},post:function(a,b,c,d){var e=new ajax_request;if(e.method="POST",e.url=a,e.data=b,$fox.is_undefined(c)&&(c={}),$fox.is_function(c.before)&&(e.before=c.before),$fox.is_function(c.upload_progress)&&(e.upload_progress=c.upload_progress),$fox.is_function(c.success)&&(e.success=c.success),$fox.is_function(c.error)&&(e.error=c.error),$fox.is_function(c.complete)&&(e.complete=c.complete),$fox.is_function(c.abort)&&(e.abort=c.abort),$fox.is_object(d))for(key in d)e[key]=d[key];e.execute()},auto_submit:function(a){var b=a.attr("action"),c=a.serialize(),d=a.attr("method"),e=a.find(":submit"),f=e.html(),g=a.data("submit_button_loading_text"),h=a.data("disable_submit_button_during_submit");d=void 0===d||"POST"!==d&&"post"!==d?"get":"post";var i=new ajax_request;i.$form=a,i.method=d,i.url=b,i.data=c,$fox.is_defined(h)?"yes"===h?i.disable_submit_button_during_submit=!0:"no"===h?i.disable_submit_button_during_submit=!1:i.disable_submit_button_during_submit=this.disable_submit_button_during_submit:i.disable_submit_button_during_submit=this.disable_submit_button_during_submit;var j=a.data("before");if(!$fox.is_undefined(j))if($fox.is_function(window[j])){if(window[j]()===!1)return}else if(DEBUG)return void $fox.log('AJAX Auto Submit: Missing "before" function "'+j+'".');i.before=function(){$fox.ui.lock_element(a),$fox.is_undefined(g)||e.html(g),i.disable_submit_button_during_submit&&e.prop("disabled",!0)};var k=a.data("success");if(!$fox.is_undefined(k))if($fox.is_function(window[k]))window[k]!==!1&&(i.success=window[k]);else if(DEBUG)return void $fox.log('AJAX Auto Submit: Missing "success" function "'+k+'".');i.complete=function(b){$fox.is_defined(b.redirect)||($fox.ui.unlock_element(a),$fox.is_undefined(g)||e.html(f),i.disable_submit_button_during_submit&&e.removeAttr("disabled"))},i.execute()}};
function ui(){}ui.prototype={show_element_lock:!1,dialog_class:"fox-dialog",dialogs:[],validation_style:"default",validation_error_class:"validation-error",alert_style:"noty",init:function(){"undefined"!=typeof notices&&this.show_notices(notices)},init_dialog:function(a,b,c,d,e){var f=this,g=f.dialogs.length,e=$fox.is_defined(e)?e:"dialog_"+(g+1),h="#"+e,i=!1,j=!0,k=300,l=250,m=!1,n=!1,o=80,p=!0;$fox.is_defined(d)&&(i="undefined"!=typeof d.auto_open?d.auto_open:!1,j=$fox.is_defined(d.modal)?d.modal:!0,k=$fox.is_defined(d.width)?d.width:300,l=$fox.is_defined(d.height)?d.height:250,m=$fox.is_defined(d.resizable)?d.resizable:!1,n=$fox.is_defined(d.draggable)?d.draggable:!1,$fox.is_defined(d.other)&&($fox.is_defined(d.other.top)&&(o=d.other.top),$fox.is_defined(d.other.loader)&&(p=d.other.loader)));var q=[];if("dialog"===a){t=$fox.is_array(d.buttons)?this.init_dialog_buttons(e,d.buttons):{};for(var r in t){var s=t[r];s.disabled===!0&&q.push(r)}}else if("confirm"===a)var t={Confirm:function(){d.confirm_callback(),$(this).dialog("close")},Cancel:function(){$fox.is_defined(d.cancel_callback)&&d.cancel_callback(),$(this).dialog("close")}};else if("alert"===a)var t={OK:function(){$(this).dialog("close")}};var u=122,v=l-u;if($fox.exists($(h))){var w="";p&&(w+='<div id="'+e+'_loader" style="height:'+v+"px;line-height:"+v+'px" class="loader"></div>'),w+='<div id="'+e+'_body" class="body">'+c+"</div>",w+="</div>",$("#"+e).html(w)}else{var w='<div id="'+e+'" class="'+f.dialog_class+'" style="display:none" title="'+($fox.is_defined(b)?b:"")+'">';p&&(w+='<div id="'+e+'_loader" style="height:'+v+"px;line-height:"+v+'px" class="loader"></div>'),w+='<div id="'+e+'_body">'+c+"</div>",w+="</div>",$("body").append(w)}var x=$(h).dialog({autoOpen:i,width:k,height:l,modal:j,resizable:m,draggable:n,buttons:t,position:["center",o],create:function(){if($fox.is_object(d.events)&&($fox.is_object(d.events.on_open)&&$(this).on("dialogopen",d.events.on_open),$fox.is_object(d.events.before_close)&&$(this).on("dialogbeforeclose",d.events.before_close)),$fox.is_object(d.other))for(var a in d.other)$(this).dialog("option",a,d.other[a]);f.dialogs[g]=$(this)},open:function(){for(var a=0,b=q.length;b>a;a++){var c=q[a];$(".ui-dialog-buttonpane button:contains("+c+")").prop("disabled",!0)}$(".ui-dialog :button").blur();var d=$(this);$(d).find('input[type="text"]').each(function(a,b){$(b).on("keypress",function(a){if(13===a.which){var b=d.dialog("option","save_button");null!==b&&b.action()}})})},close:function(){$fox.is_defined(d.events)&&$fox.is_object(d.events.after_close)&&d.events.after_close(),f.hide_validation_tooltips()},beforeClose:function(){}});return x.set_title=function(a){this.dialog("option","title",a)},x.set_content=function(a){$("#"+this.attr("id")+"_body").html(a)},x.set_buttons=function(a){this.dialog("option","buttons",f.init_dialog_buttons(this.attr("id"),a));for(var b in a){var c=a[b];if(c.save){this.dialog("option","save_button",c);break}}},x.show_loader=function(){var a=this.attr("id");$("#"+a+"_body").hide(),$("#"+a+"_loader").show()},x.hide_loader=function(){var a=this.attr("id");$("#"+a+"_loader").hide(),$("#"+a+"_body").show()},x.show_error=function(a){var b=x.dialog("option","height")-140;$("#"+this.attr("id")+"_body").html('<div class="fox-dialog-error" style="height:'+b+"px;line-height:"+b+'px">'+a+"</div>")},x.open=function(){this.dialog("open")},x.close=function(){this.dialog("close")},x},open_dialog:function(a){"object"==typeof this.dialogs[a]&&this.dialogs[a].dialog("open")},show_confirm:function(a,b,c,d){if($fox.is_undefined(a))return void(DEBUG&&$fox.log('Missing "message" attribute.'));if($fox.is_undefined(b))return void(DEBUG&&$fox.log('Missing "confirm_callback" attribute.'));if("jquery-ui"===this.alert_style)var e=this.show_dialog("Confirm",a,!0,500,250,!0,!1,!1,[{title:"Yes",on_click:function(){$fox.is_defined(b)&&b(),e.close()}},{title:"No",on_click:function(){$fox.is_defined(c)&&c(),e.close()}}],{},{loader:!1});else"noty"===this.alert_style&&noty({text:a,type:"confirm",layout:"bottom",buttons:[{addClass:"btn btn-primary",text:"Ok",onClick:function(a){$fox.is_defined(b)&&b(),a.close()}},{addClass:"btn btn-danger",text:"Cancel",onClick:function(a){$fox.is_defined(c)&&c(),a.close()}}]})},show_alert:function(a){return $fox.is_undefined(a)?void(DEBUG&&$fox.log('Missing "message" attribute.')):void("jquery-ui"===this.alert_style?this.show_dialog("error",a,!0,500,400,!0,!1,!1,[{title:"OK",close_on_click:!0}]):"noty"===this.alert_style?noty({text:a,type:"alert"}):alert(a))},show_dialog:function(a,b,c,d,e,f,g,h,i,j,k){return this.init_dialog("dialog",a,b,{auto_open:c,width:d,height:e,modal:f,resizable:g,draggable:h,buttons:i,events:j,other:k})},init_dialog_from_element:function(a,b,c,d,e,f,g,h,i,j){var k=$(a);return this.init_dialog("dialog",k.attr("title"),k.html(),{auto_open:b,width:c,height:d,modal:e,resizable:f,draggable:g,buttons:h,events:i,other:j},a.substring(1))},lock_body:function(){$("body").append('<div id="body_lock" class="lock-ie-bg" style="background:url(\''+BASE_URL+'assets/img/bg-white-lock.png\') repeat center center !important;top:0;position:fixed;z-index:9000;width:100%;height:100%;"><div class="lock-ie" style="background:url(\''+BASE_URL+"assets/img/loading.gif') no-repeat center center !important;top:0;position:absolute;z-index:9001;width:100%;height:100%\"></div></div>")},unlock_body:function(){$("#body_lock").remove()},lock_element:function(a){if($fox.is_defined(a.data("lock_body")))return this.lock_body();if($fox.is_object(a)){var b=a.position();a.append('<div id="element_lock" class="lock" style="'+($fox.is_defined(b.top)?"top:"+b.top+"px;":"")+" position:absolute;z-index:9000;width:"+a.outerWidth()+"px; height:"+a.outerHeight()+"px"+(this.show_element_lock?";background-color:rgba(0, 0, 0, 0.2)":"")+'"></div>')}},unlock_element:function(a){if(!$fox.is_object(a))return!1;var b=a.find("#element_lock");return 0===b.length?!1:void $(b).remove()},show_notices:function(a){for(var b in a)for(var c=0,d=a[b].length;d>c;c++)"successes"===b?this.show_success(a[b][c]):"errors"===b?this.show_error(a[b][c]):this.show_info(a[b][c])},show_success:function(a){"noty"===this.alert_style?noty({text:a,type:"success"}):this.show_dialog("Success",a,!0,400,250,!0,!1,!1,[{title:"OK",close_on_click:!0}],{},{loader:!1})},show_error:function(a){"noty"===this.alert_style?noty({text:a,type:"error"}):this.show_dialog("Error",a,!0,400,250,!0,!1,!1,[{title:"OK",close_on_click:!0}],{},{loader:!1})},show_info:function(a){"noty"===this.alert_style?noty({text:a,type:"information",layout:"bottom"}):this.show_alert(a)},show_validation_tooltip:function(a){"default"===this.validation_style&&a.parents(".form-group").addClass("has-error")},hide_validation_tooltips:function(){"default"===this.validation_style&&$(".form-group").removeClass("has-error")},hide_validation_toolip:function(a){"default"===this.validation_style&&a.parents(".form-group.has-error").removeClass("has-error")},init_dialog_buttons:function(a,b){create_dialog_button_function=function(b){return{text:b.title,disabled:b.disabled===!0,click:function(){var c;$fox.is_function(b.on_click)&&(c=b.on_click()),b.close_on_click&&c!==!1&&$("#"+a).dialog("close")}}};for(var c={},d=0,e=b.length;e>d;d++){var f=b[d];f.selector=".ui-dialog-buttonpane button:contains("+f.title+")",f.reset=function(){$(this.selector).text(this.title).removeAttr("disabled"),this.selector=".ui-dialog-buttonpane button:contains("+this.title+")"},f.enable=function(){$(this.selector).removeAttr("disabled")},f.disable=function(){$(this.selector).prop("disabled",!0)},f.show=function(){$(this.selector).css("visibility","visible")},f.hide=function(){$(this.selector).css("visibility","hidden")},f.set_title=function(a,b){$(this.selector+" .ui-button-text").text(a),this.selector=".ui-dialog-buttonpane button:contains("+a+")",b===!0&&this.disable()},c[f.title]=create_dialog_button_function(f)}return c}};
function Fox(){}Fox.prototype={window:null,ui:null,ajax:null,helper:null,init:function(){this.window=window,this.binds(),this.ajax=new ajax,this.ui=new ui},after_dom_init:function(){this.ui.init()},binds:function(){$("form.fox-auto-submit").on("submit",function(a){a.preventDefault(),$fox.ajax.auto_submit($(this))})},is_empty:function(a){if(null===a)return!0;if(this.is_array(a)||this.is_string(a))return 0===a.length;for(var b in a)if(this.has(a,b))return!1;return!0},is_undefined:function(a){return void 0==a},is_defined:function(a){return!this.is_undefined(a)},exists:function(a){return a.length>0},is_object:function(a){return a===Object(a)},is_array:Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},in_array:function(a,b){return-1!==$.inArray(a,b)},is_function:function(a){return"function"==typeof a},is_string:function(a){return"[object String]"===Object.prototype.toString.call(a)},is_number:function(a){return!isNaN(a)},is_integer:function(a){return"[object Number]"===Object.prototype.toString.call(a)},has:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},redirect:function(a){window.location=a},log:function(a){window.console&&console.log(a)},is_email:function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!this.is_empty(a)&&b.test(a)},get_unix_timestamp:function(){return Date.now||(Date.now=function(){return+new Date}),Date.now()},round:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},format_filesize:function(a){return a>=1073741824?this.round(a/1073741824,2)+" GB":a>=1048576?this.round(a/1048576,2)+" MB":a>=1024?this.round(a/1024,0)+" KB":a+" B"},implode:function(a,b){var c="",d="",e="";if(1===arguments.length&&(b=a,a=""),"object"==typeof b){if("[object Array]"===Object.prototype.toString.call(b))return b.join(a);for(c in b)d+=e+b[c],e=a;return d}return b}},$fox=new Fox,$fox.init(),$(function(){$fox.after_dom_init()});